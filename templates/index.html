<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLB Trade Simulator</title>
</head>
<body>
    <h1>MLB Trade Simulator</h1>

    <!-- Team 1 Selection -->
    <label for="team1">Select Team 1:</label>
    <select id="team1" name="team1"></select>

    <!-- Players for Team 1 -->
    <label for="team1-players">Players from Team 1:</label>
    <select id="team1-players" name="team1-players" multiple></select>

    <!-- Team 2 Selection -->
    <label for="team2">Select Team 2:</label>
    <select id="team2" name="team2"></select>

    <!-- Players for Team 2 -->
    <label for="team2-players">Players from Team 2:</label>
    <select id="team2-players" name="team2-players" multiple></select>

    <script>
        // Function to load teams into both team dropdowns
        async function loadTeams() {
            const response = await fetch('/teams');
            const teams = await response.json();

            const team1Dropdown = document.getElementById('team1');
            const team2Dropdown = document.getElementById('team2');

            teams.forEach(team => {
                // Populate Team 1 dropdown
                const option1 = document.createElement('option');
                option1.value = team.id;
                option1.textContent = team.name;
                team1Dropdown.appendChild(option1);

                // Populate Team 2 dropdown
                const option2 = document.createElement('option');
                option2.value = team.id;
                option2.textContent = team.name;
                team2Dropdown.appendChild(option2);
            });
        }

        // Function to load players for a selected team
        async function loadPlayers(teamId, dropdownId) {
            if (!teamId) {
                document.getElementById(dropdownId).innerHTML = ''; // Clear previous players
                return;
            }

            const response = await fetch(`/players/${teamId}`);
            const players = await response.json();

            const playerDropdown = document.getElementById(dropdownId);
            playerDropdown.innerHTML = ''; // Clear existing options

            players.forEach(player => {
                const option = document.createElement('option');
                option.value = player.id;
                option.textContent = `${player.name} (${player.position})`;
                playerDropdown.appendChild(option);
            });
        }

        // Event listeners for Team 1 and Team 2 selection
        document.getElementById('team1').addEventListener('change', (e) => {
            loadPlayers(e.target.value, 'team1-players');
        });

        document.getElementById('team2').addEventListener('change', (e) => {
            loadPlayers(e.target.value, 'team2-players');
        });

        // Load teams on page load
        loadTeams();
    </script>
</body>
</html>
